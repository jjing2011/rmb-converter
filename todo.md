# 人民币大写转换器开发清单

---

## **阶段 0：环境准备**
### 基础框架
- [x] 创建项目仓库
  - 初始化 `rmb_converter/` 目录结构
  - 添加 `requirements.txt` 包含 pytest
- [x] 搭建测试框架
  - 创建 `tests/` 目录
  - 添加基础测试配置文件 `pytest.ini`
- [x] 创建项目目录结构
- [x] 设置Python虚拟环境
- [x] 配置pyproject.toml
- [x] 创建README.md

---

## **阶段 1：输入处理**
### 核心验证
- [x] 实现基础输入验证
  - 创建 `validator.py`
  - 添加 `validate_input()` 函数
  - 支持字符串/数值类型转换
  - 编写测试用例：
    - 合法数字（123.45）
    - 非法字符（"12a3"）
    - 空输入（""）

- [x] 整数范围检查
  - 在 `validator.py` 添加 `check_integer_length()`
  - 实现12位整数限制
  - 测试用例：
    - 12位整数（999999999999）
    - 13位整数（1000000000000）
    - 0值处理（0.56）

---

## **阶段 2：数字分割**
### 预处理模块
- [x] 实现数字分割
  - 创建 `splitter.py`
  - 添加 `split_number()` 函数
  - 处理逻辑：
    - 强制转为两位小数（123 → 123.00）
    - 分离整数和小数部分
  - 测试用例：
    - 纯整数（123 → "123", "00"）
    - 纯小数（0.56 → "0", "56"）
    - 长小数（123.4567 → "123", "45"）

---

## **阶段 3：核心转换**
### 基础映射
- [x] 创建数字字典
  - 在 `converter/core.py` 定义：
    - `CN_NUMS = ['零', '壹', ..., '玖']`
    - `UNITS = ['', '拾', '佰', '仟']`
  - 测试数字映射：
    - 边界值（0 → 零，9 → 玖）

### 四位转换
- [x] 实现四位数转换
  - 创建 `integer_conv.py`
  - 添加 `convert_four_digits()`
  - 处理逻辑：
    - 反向遍历数字（从个位开始）
    - 动态附加单位
  - 测试用例：
    - 常规数字（3456 → 叁仟肆佰伍拾陆）
    - 含零数字（1005 → 壹仟零伍）

---

## **阶段 4：层级处理**
### 亿/万分段
- [x] 实现大数分割
  - 在 `integer_conv.py` 添加 `split_large_number()`
  - 逻辑：
    - 按4位分段（从右向左）
    - 附加亿/万单位
  - 测试用例：
    - 12位数（123456789012 → 拾贰亿叁仟肆佰伍拾陆万柒仟捌佰玖拾元）
    - 纯亿级数（100000000 → 壹亿）

### 零处理
- [x] 实现零合并
  - 创建 `formatter.py`
  - 添加 `merge_zeros()`
  - 正则替换连续零
  - 测试用例：
    - 中间多个零（壹万零零零伍 → 壹万零伍）
    - 末尾零（壹仟零伍零零 → 壹仟零伍）

---

## **阶段 5：小数处理**
### 角分转换
- [x] 实现小数部分转换
  - 创建 `decimal_conv.py`
  - 添加 `convert_jiao_fen()`
  - 处理逻辑：
    - 角为零时显示"零"
    - 分位必显示
  - 测试用例：
    - 0.04 → 零肆分
    - 0.10 → 壹角整

---

## **阶段 6：最终集成**
### 结果拼接
- [x] 组合完整结果
  - 在 `formatter.py` 添加 `format_final()`
  - 逻辑：
    - 连接整数和小数部分
    - 处理"整"字规则
  - 测试用例：
    - 1005.00 → 壹仟零伍元整
    - 1010.10 → 壹仟零壹拾元零壹角

### 错误处理
- [x] 统一异常处理
  - 创建 `exceptions.py`
  - 定义自定义异常：
    - `InvalidAmountError`
    - `OverflowAmountError`
  - 集成到验证模块

---

## **阶段 7：测试与优化**
### 测试覆盖
- [x] 编写边界测试
  - 最大有效值（999999999999.99）
  - 全零值（0.00 → 零元整）
  - 小数截断验证（123.456 → 123.45）

### 性能优化
- [x] 添加基准测试
  - 创建 `tests/benchmark.py`
  - 测试万次转换耗时
  - 优化正则表达式性能

---

## **阶段 8：文档与交付**
### 用户文档
- [x] 编写API文档
  - 使用示例
  - 异常代码说明
- [x] 创建示例文件
  - `examples/basic_usage.py`
  - 演示常见用法
- [x] 更新README.md
- [x] 添加使用说明
- [x] 添加开发指南

### 交付准备
- [x] 打包配置
  - 添加 `setup.py`
  - 配置版本号（1.0.0）
- [x] 最终检查
  - PEP8合规性验证
  - 100%测试通过率
  - 文档拼写检查

---

**更新日志**  
✅ 完成 ｜ ⏳ 进行中 ｜ ❌ 未开始

## 待办事项
- [ ] 添加更多的边界测试用例
- [ ] 优化错误提示信息
- [ ] 考虑添加国际化支持
- [ ] 考虑添加Web API接口
``` 

这个清单采用模块化设计，每个任务都可独立验证。建议：  
1. 按阶段顺序执行（0 → 8）  
2. 每个任务完成后立即运行对应测试  
3. 使用 ✅ 标记完成状态  
4. 复杂任务可进一步拆分子任务（如：阶段3的"四位转换"可拆分为数字映射+单位附加）